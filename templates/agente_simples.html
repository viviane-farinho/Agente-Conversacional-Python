{% extends "base.html" %}

{% block title %}Agente Simples - Secretaria IA{% endblock %}

{% block extra_css %}
<style>
    /* Scoped styles for this page only to match the "Neon Glass" look */
    :root {
        --neon-purple: #d946ef;
        --neon-green: #22c55e;
        --neon-blue: #3b82f6;
        --neon-cyan: #06b6d4;
        --glass-bg: rgba(255, 255, 255, 0.03);
        --glass-border: rgba(255, 255, 255, 0.08);
        --glass-highlight: rgba(255, 255, 255, 0.15);
    }

    /* Deep Space Background with Nebula Effects */
    .agents-dashboard {
        background-color: #020204;
        background-image:
            radial-gradient(circle at 20% 30%, rgba(217, 70, 239, 0.4) 0%, transparent 60%),
            radial-gradient(circle at 80% 20%, rgba(34, 197, 94, 0.3) 0%, transparent 60%),
            radial-gradient(circle at 80% 80%, rgba(59, 130, 246, 0.4) 0%, transparent 60%),
            radial-gradient(circle at 20% 80%, rgba(6, 182, 212, 0.3) 0%, transparent 60%);
        /* Changed from min-height: 100vh to auto to fix spacing issues */
        min-height: auto;
        color: #ffffff;
        padding: 2rem;
        border-radius: 24px;
        position: relative;
        overflow: hidden;
    }

    /* Glass Cards */
    /* Premium Glass Card - Base Style */
    .glass-card {
        backdrop-filter: blur(40px);
        -webkit-backdrop-filter: blur(40px);
        border-radius: 28px;
        box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.3);
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        overflow: hidden;
        border: 1px solid rgba(255, 255, 255, 0.05);
        border-top: 1px solid rgba(255, 255, 255, 0.4);
        /* Top light effect */
        border-bottom: 1px solid rgba(0, 0, 0, 0.2);
    }

    /* Agent Card Specifics */
    .agent-card {
        background: linear-gradient(180deg, rgba(217, 70, 239, 0.15) 0%, rgba(10, 10, 15, 0.8) 100%);
        box-shadow: 0 0 40px rgba(217, 70, 239, 0.1), inset 0 0 20px rgba(217, 70, 239, 0.05);
    }

    .agent-card:hover {
        border-color: rgba(217, 70, 239, 0.6);
        border-top-color: rgba(217, 70, 239, 0.8);
        box-shadow: 0 0 60px rgba(217, 70, 239, 0.25), inset 0 0 30px rgba(217, 70, 239, 0.1);
        transform: translateY(-2px);
    }

    /* Icon Box with Glow */
    .icon-box {
        position: relative;
        background: rgba(0, 0, 0, 0.2);
        border-radius: 50%;
        transition: all 0.3s ease;
    }

    /* Status Badge */
    .status-badge {
        background: rgba(0, 0, 0, 0.3);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 20px;
        display: inline-flex;
        align-items: center;
        gap: 6px;
    }

    .status-dot {
        border-radius: 50%;
        box-shadow: 0 0 8px currentColor;
        animation: pulse 2s infinite;
    }

    @keyframes pulse {
        0% {
            opacity: 1;
            transform: scale(1);
        }

        50% {
            opacity: 0.5;
            transform: scale(0.8);
        }

        100% {
            opacity: 1;
            transform: scale(1);
        }
    }

    /* Custom Scrollbar */
    ::-webkit-scrollbar {
        width: 8px;
        height: 8px;
    }

    ::-webkit-scrollbar-track {
        background: #020204;
    }

    ::-webkit-scrollbar-thumb {
        background: rgba(255, 255, 255, 0.1);
        border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
        background: rgba(255, 255, 255, 0.2);
    }

    /* Buttons */
    .btn-glass {
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.1);
        color: white;
        transition: all 0.2s;
    }

    .btn-glass:hover {
        background: rgba(255, 255, 255, 0.1);
        border-color: rgba(255, 255, 255, 0.2);
        color: white;
    }

    /* Calendar Styles */
    .calendar-day {
        transition: all 0.2s;
        cursor: pointer;
    }

    .calendar-day:hover:not(.disabled) {
        background: rgba(255, 255, 255, 0.1) !important;
        transform: translateY(-2px);
    }

    .calendar-day.active-day {
        transform: scale(1.02);
    }
</style>
{% endblock %}

{% block content %}
<!-- Section 1: Header + Agent & RAG -->
<div class="agents-dashboard pt-5 pb-4 px-4">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <div>
            <h2 class="fw-bold mb-1 text-white fs-4">Agente Simples</h2>
            <p class="text-white-50 mb-0 small">Visão unificada do seu assistente inteligente</p>
        </div>
    </div>

    <div class="row g-4">
        <!-- Main Agent Card -->
        <div class="col-md-8">
            <div
                class="glass-card agent-card active p-4 h-100 d-flex flex-column justify-content-center position-relative">
                <!-- Background Glow -->
                <div class="position-absolute top-50 start-50 translate-middle"
                    style="width: 200px; height: 200px; background: radial-gradient(circle, rgba(217, 70, 239, 0.15) 0%, transparent 70%); pointer-events: none;">
                </div>

                <div class="d-flex align-items-center gap-4 position-relative z-1">
                    <!-- Icon -->
                    <div class="d-flex flex-column align-items-center gap-2">
                        <div class="icon-box rounded-circle d-flex align-items-center justify-content-center"
                            style="width: 90px; height: 90px;">
                            <i class="bi bi-robot text-white"
                                style="font-size: 2.8rem; filter: drop-shadow(0 0 15px #bd34fe); z-index: 2;"></i>
                            <div class="position-absolute w-100 h-100 rounded-circle"
                                style="background: radial-gradient(circle at 30% 30%, rgba(217, 70, 239, 0.4), transparent 70%); z-index: 1;">
                            </div>
                        </div>
                        <span class="status-badge text-white" style="padding: 4px 8px; font-size: 0.75rem;">
                            <span class="status-dot" style="color: #30d158; width: 6px; height: 6px;"></span>Online
                        </span>
                    </div>

                    <!-- Info -->
                    <div class="flex-grow-1">
                        <div class="d-flex justify-content-between align-items-start mb-2">
                            <h3 class="fw-bold text-white mb-0">Secretaria IA</h3>
                            <div class="d-flex gap-2">
                                <button class="btn btn-glass btn-sm px-3"
                                    onclick="window.location.href='/admin/configuracoes'">
                                    <i class="bi bi-gear me-1"></i> CONFIGURAR
                                </button>
                                <button class="btn btn-glass btn-sm px-3">
                                    <i class="bi bi-journal-text me-1"></i> LOGS
                                </button>
                            </div>
                        </div>
                        <p class="text-white-50 mb-3" style="max-width: 600px;">
                            Seu assistente virtual completo. Gerencia agendamentos, responde dúvidas e organiza o
                            atendimento automaticamente.
                        </p>

                        <!-- Mini Stats -->
                        <div class="d-flex gap-4 mt-2">
                            <div class="d-flex align-items-center gap-2">
                                <i class="bi bi-chat-dots text-primary"></i>
                                <span class="text-white fw-bold">1.2k</span>
                                <span class="text-white-50 small">mensagens</span>
                            </div>
                            <div class="d-flex align-items-center gap-2">
                                <i class="bi bi-calendar-check text-success"></i>
                                <span class="text-white fw-bold">85</span>
                                <span class="text-white-50 small">agendamentos</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- RAG / Knowledge Base Card -->
        <div class="col-md-4">
            <div class="glass-card h-100 p-4 d-flex flex-column align-items-center justify-content-center text-center"
                onclick="window.location.href='/admin/rag'" style="cursor: pointer;">
                <div class="icon-box rounded-circle d-flex align-items-center justify-content-center mb-3"
                    style="width: 70px; height: 70px; background: rgba(59, 130, 246, 0.1);">
                    <i class="bi bi-database-fill-gear text-white"
                        style="font-size: 2rem; filter: drop-shadow(0 0 10px #3b82f6);"></i>
                </div>
                <h4 class="fw-bold text-white mb-2">Base de Conhecimento</h4>
                <p class="text-white-50 small mb-0 px-3">
                    Gerencie os documentos e informações que sua IA usa para responder.
                </p>
                <button class="btn btn-glass btn-sm mt-3 px-4">
                    Acessar RAG <i class="bi bi-arrow-right ms-1"></i>
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Section 2: Calendar -->
<div class="agents-dashboard pt-4 pb-4 px-4 mt-4">
    <div class="glass-card p-4">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <div class="d-flex align-items-center gap-3">
                <div class="icon-box rounded-circle d-flex align-items-center justify-content-center"
                    style="width: 48px; height: 48px; background: rgba(217, 70, 239, 0.1); border: 1px solid rgba(217, 70, 239, 0.3);">
                    <i class="bi bi-calendar-event text-white"
                        style="font-size: 1.5rem; filter: drop-shadow(0 0 10px #bd34fe);"></i>
                </div>
                <div>
                    <h3 class="fw-bold mb-0 text-white">Agenda Inteligente</h3>
                    <p class="text-white-50 mb-0 small">Próximos agendamentos e tarefas</p>
                </div>
            </div>
            <div class="d-flex gap-2">
                <button class="btn btn-glass btn-sm"><i class="bi bi-chevron-left"></i></button>
                <button class="btn btn-glass btn-sm"><i class="bi bi-chevron-right"></i></button>
            </div>
        </div>

        <!-- Calendar Grid -->
        <div class="calendar-grid">
            <!-- Weekdays -->
            <div class="d-grid"
                style="grid-template-columns: repeat(7, 1fr); gap: 10px; text-align: center; margin-bottom: 15px;">
                <div class="text-white-50 small fw-bold">DOM</div>
                <div class="text-white-50 small fw-bold">SEG</div>
                <div class="text-white-50 small fw-bold">TER</div>
                <div class="text-white-50 small fw-bold">QUA</div>
                <div class="text-white-50 small fw-bold">QUI</div>
                <div class="text-white-50 small fw-bold">SEX</div>
                <div class="text-white-50 small fw-bold">SAB</div>
            </div>

            <!-- Days -->
            <div class="d-grid" style="grid-template-columns: repeat(7, 1fr); gap: 10px;">
                <!-- Previous Month -->
                <div class="calendar-day disabled p-3 rounded-3 text-white-50"
                    style="background: rgba(255,255,255,0.02);">29</div>
                <div class="calendar-day disabled p-3 rounded-3 text-white-50"
                    style="background: rgba(255,255,255,0.02);">30</div>

                <!-- Current Month -->
                <div class="calendar-day p-3 rounded-3 text-white position-relative"
                    style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);">1</div>
                <div class="calendar-day p-3 rounded-3 text-white position-relative"
                    style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);">2</div>
                <div class="calendar-day p-3 rounded-3 text-white position-relative"
                    style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);">
                    3
                    <div class="position-absolute bottom-0 start-50 translate-middle-x mb-2 d-flex gap-1">
                        <div class="rounded-circle"
                            style="width: 4px; height: 4px; background: #22c55e; box-shadow: 0 0 5px #22c55e;">
                        </div>
                    </div>
                </div>
                <div class="calendar-day p-3 rounded-3 text-white position-relative active-day"
                    style="background: linear-gradient(135deg, rgba(217, 70, 239, 0.2), rgba(217, 70, 239, 0.05)); border: 1px solid rgba(217, 70, 239, 0.5); box-shadow: 0 0 15px rgba(217, 70, 239, 0.2);">
                    4
                    <div class="position-absolute top-0 end-0 mt-1 me-2 text-white-50" style="font-size: 0.6rem;">
                        HOJE
                    </div>
                    <div class="mt-2">
                        <div class="p-1 rounded mb-1 text-truncate"
                            style="background: rgba(34, 197, 94, 0.2); font-size: 0.7rem; border-left: 2px solid #22c55e;">
                            <span class="text-white">R$ 5.000</span>
                        </div>
                        <div class="p-1 rounded text-truncate"
                            style="background: rgba(6, 182, 212, 0.2); font-size: 0.7rem; border-left: 2px solid #06b6d4;">
                            <span class="text-white">Consulta Dr. Silva</span>
                        </div>
                    </div>
                </div>
                <div class="calendar-day p-3 rounded-3 text-white position-relative"
                    style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);">5</div>
                <div class="calendar-day p-3 rounded-3 text-white position-relative"
                    style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);">6</div>
                <div class="calendar-day p-3 rounded-3 text-white position-relative"
                    style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);">7</div>

                <!-- Row 2 -->
                <div class="calendar-day p-3 rounded-3 text-white position-relative"
                    style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);">8</div>
                <div class="calendar-day p-3 rounded-3 text-white position-relative"
                    style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);">
                    9
                    <div class="position-absolute bottom-0 start-50 translate-middle-x mb-2 d-flex gap-1">
                        <div class="rounded-circle"
                            style="width: 4px; height: 4px; background: #3b82f6; box-shadow: 0 0 5px #3b82f6;">
                        </div>
                    </div>
                </div>
                <div class="calendar-day p-3 rounded-3 text-white position-relative"
                    style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);">10</div>
                <div class="calendar-day p-3 rounded-3 text-white position-relative"
                    style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);">11</div>
                <div class="calendar-day p-3 rounded-3 text-white position-relative"
                    style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);">12</div>
                <div class="calendar-day p-3 rounded-3 text-white position-relative"
                    style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);">13</div>
                <div class="calendar-day p-3 rounded-3 text-white position-relative"
                    style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);">14</div>

                <!-- Row 3 -->
                <div class="calendar-day p-3 rounded-3 text-white position-relative"
                    style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);">15</div>
                <div class="calendar-day p-3 rounded-3 text-white position-relative"
                    style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);">16</div>
                <div class="calendar-day p-3 rounded-3 text-white position-relative"
                    style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);">17</div>
                <div class="calendar-day p-3 rounded-3 text-white position-relative"
                    style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);">
                    18
                    <div class="mt-2">
                        <div class="p-1 rounded text-truncate"
                            style="background: rgba(6, 182, 212, 0.2); font-size: 0.7rem; border-left: 2px solid #06b6d4;">
                            <span class="text-white">Reunião Equipe</span>
                        </div>
                    </div>
                </div>
                <div class="calendar-day p-3 rounded-3 text-white position-relative"
                    style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);">19</div>
                <div class="calendar-day p-3 rounded-3 text-white position-relative"
                    style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);">20</div>
                <div class="calendar-day p-3 rounded-3 text-white position-relative"
                    style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);">21</div>

                <!-- Row 4 -->
                <div class="calendar-day p-3 rounded-3 text-white position-relative"
                    style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);">22</div>
                <div class="calendar-day p-3 rounded-3 text-white position-relative"
                    style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);">23</div>
                <div class="calendar-day p-3 rounded-3 text-white position-relative"
                    style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);">24</div>
                <div class="calendar-day p-3 rounded-3 text-white position-relative"
                    style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);">
                    25
                    <div class="mt-2">
                        <div class="p-1 rounded mb-1 text-truncate"
                            style="background: rgba(34, 197, 94, 0.2); font-size: 0.7rem; border-left: 2px solid #22c55e;">
                            <span class="text-white">R$ 12.500</span>
                        </div>
                    </div>
                </div>
                <div class="calendar-day p-3 rounded-3 text-white position-relative"
                    style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);">26</div>
                <div class="calendar-day p-3 rounded-3 text-white position-relative"
                    style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);">27</div>
                <div class="calendar-day p-3 rounded-3 text-white position-relative"
                    style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);">28</div>

                <!-- Row 5 -->
                <div class="calendar-day p-3 rounded-3 text-white position-relative"
                    style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);">29</div>
                <div class="calendar-day p-3 rounded-3 text-white position-relative"
                    style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);">30</div>
                <div class="calendar-day p-3 rounded-3 text-white position-relative"
                    style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);">31</div>

                <!-- Next Month Preview -->
                <div class="calendar-day disabled p-3 rounded-3 text-white-50"
                    style="background: rgba(255,255,255,0.02);">1</div>
                <div class="calendar-day disabled p-3 rounded-3 text-white-50"
                    style="background: rgba(255,255,255,0.02);">2</div>
                <div class="calendar-day disabled p-3 rounded-3 text-white-50"
                    style="background: rgba(255,255,255,0.02);">3</div>
                <div class="calendar-day disabled p-3 rounded-3 text-white-50"
                    style="background: rgba(255,255,255,0.02);">4</div>
            </div>
        </div>
    </div>
</div>

<!-- Section 3: Pipeline -->
<div class="agents-dashboard pt-4 pb-4 px-4 mt-4 d-flex flex-column">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <div>
            <h3 class="fw-bold mb-1 text-white fs-5">Pipeline Geral</h3>
            <p class="text-white-50 mb-0 small">Fluxo de atendimento unificado</p>
        </div>
        <button class="btn btn-glass btn-sm">
            <i class="bi bi-arrow-right me-1"></i> Ver Tudo
        </button>
    </div>

    <div class="glass-card p-4 flex-grow-1 d-flex flex-column" style="min-height: 600px;">
        <div class="row g-3 flex-grow-1">
            <!-- Column: Novos -->
            <div class="col-md-4">
                <div class="p-3 rounded-4 h-100"
                    style="background: rgba(255, 255, 255, 0.03); border: 1px solid rgba(255, 255, 255, 0.05);">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h6 class="text-white fw-bold mb-0"><i class="bi bi-star text-warning me-2"></i>Novos</h6>
                        <span class="badge bg-warning bg-opacity-25 text-warning">5</span>
                    </div>
                    <!-- Card -->
                    <div class="p-3 rounded-3 mb-2"
                        style="background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1);">
                        <div class="d-flex justify-content-between mb-2">
                            <small class="text-white-50">Há 10min</small>
                            <i class="bi bi-whatsapp text-success"></i>
                        </div>
                        <h6 class="text-white mb-1">Novo Cliente</h6>
                        <p class="text-white-50 small mb-0">Olá, gostaria de saber mais...</p>
                    </div>
                </div>
            </div>

            <!-- Column: Em Atendimento -->
            <div class="col-md-4">
                <div class="p-3 rounded-4 h-100"
                    style="background: rgba(255, 255, 255, 0.03); border: 1px solid rgba(255, 255, 255, 0.05);">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h6 class="text-white fw-bold mb-0"><i class="bi bi-chat-dots text-primary me-2"></i>Em
                            Atendimento</h6>
                        <span class="badge bg-primary bg-opacity-25 text-primary">3</span>
                    </div>
                    <!-- Card -->
                    <div class="p-3 rounded-3 mb-2"
                        style="background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1);">
                        <div class="d-flex justify-content-between mb-2">
                            <small class="text-white-50">Há 1h</small>
                            <i class="bi bi-whatsapp text-success"></i>
                        </div>
                        <h6 class="text-white mb-1">Cliente Recorrente</h6>
                        <p class="text-white-50 small mb-0">Agendando retorno...</p>
                    </div>
                </div>
            </div>

            <!-- Column: Finalizados -->
            <div class="col-md-4">
                <div class="p-3 rounded-4 h-100"
                    style="background: rgba(255, 255, 255, 0.03); border: 1px solid rgba(255, 255, 255, 0.05);">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h6 class="text-white fw-bold mb-0"><i
                                class="bi bi-check-circle text-success me-2"></i>Finalizados</h6>
                        <span class="badge bg-success bg-opacity-25 text-success">12</span>
                    </div>
                    <!-- Card -->
                    <div class="p-3 rounded-3 mb-2"
                        style="background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); opacity: 0.7;">
                        <div class="d-flex justify-content-between mb-2">
                            <span class="badge bg-success" style="font-size: 0.65rem;">Concluído</span>
                            <small class="text-white-50">Ontem</small>
                        </div>
                        <h6 class="text-white mb-1">Atendimento #123</h6>
                        <p class="text-white-50 small mb-0">Dúvida resolvida</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}